!function(o,h){try{if(!o)return;var c,e=o.navigator,u=o.location,p=o.document,l=e.userAgent,t=document.querySelector('script[src="https://cdn.simpleanalytics.io/hello.js"]'),d=t?t.getAttribute("data-mode"):null;if(-1<l.search(/(bot|spider|crawl)/gi))return;var r=function(e){var t=e&&e.isPushState,r=u.protocol+"//"+u.hostname+u.pathname;if("hash"===d&&u.hash&&(r+=u.hash.split("?")[0]),c!==r&&(c=r,!("visibilityState"in p&&"prerender"===p.visibilityState))){var n=u.search.match(/[?&](utm_source|source|ref)=([^?&]+)/gi),a=n?n.map(function(e){return e.split("=")[1]}):[],s={source:"js",url:r};l&&(s.ua=l),a&&a[0]&&(s.urlReferrer=a[0]),p.referrer&&!t&&(s.referrer=p.referrer),o.innerWidth&&(s.width=o.innerWidth);var i=new XMLHttpRequest;i.open("POST",h+"/post",!0),i.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),i.send(JSON.stringify(s))}},n=o.history;if(n&&n.pushState&&Event&&o.dispatchEvent){n.pushState=(f=n[m="pushState"],function(){var e=f.apply(this,arguments),t=new Event(m);return t.arguments=arguments,o.dispatchEvent(t),e}),o.addEventListener("pushState",function(){r({isPushState:!0})})}"hash"===d&&"onhashchange"in o&&(o.onhashchange=r),r()}catch(e){console&&console.error&&console.error(e);var a=document.getElementsByTagName("body"),s=new Image,i=h+"/hello.gif";e&&e.message&&(i=i+"?error="+encodeURIComponent(e.message)),s.src=i,s.alt="",a[0]&&a[0].appendChild(s)}var m,f}(window,"https://api.simpleanalytics.io");
